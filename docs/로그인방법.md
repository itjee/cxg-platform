# 로그인방법 트렌드

## 로그인 트렌드 요약 (2025 기준)

  - 인증 방식: SSO / OAuth2 / OpenID Connect 기반 로그인 선호 (Google, Azure, Okta, Apple)
  - 보조 인증: MFA(TOTP, WebAuthn, OTP) 필수 또는 선택적
  - 세션 관리: 단말/브라우저 별 세션, JWT 토큰, Refresh Token 사용
  - UI/UX: 통합 로그인 페이지 + 안내 메시지 제공, 모바일/데스크탑 모두 최적화
  - 운영자 계정: 공개 가입 불가, 운영자 전용 페이지/승인 흐름 필수

  즉, 일반 사용자와 운영자 계정의 로그인 방식과 UI를 분리하되, UX는 통일성 유지가 중요합니다.

## 테넌트 사용자 로그인 흐름

  1. 페이지 접근
    - URL: /login
    - 초기 화면: 이메일/사용자명 입력 + 비밀번호 또는 SSO 버튼
  2. 인증 옵션
    - Email/Password (일반 SaaS)
    - SSO 로그인 (기업 고객용)
    - Passwordless/Magic Link (선택적)
  3. 보조 인증
    - MFA가 활성화된 경우: 로그인 후 TOTP 입력 또는 WebAuthn/WebAuthn FIDO2 사용
  4. 세션/토큰 발급
    - JWT + Refresh Token
    - 테넌트 ID 및 역할 포함 (claims) → RBAC/RLS 활용
  5. 리다이렉션
    - 로그인 후 테넌트 홈 /tenant/{tenant_id}/dashboard로 이동

### 권장 페이지 구성 예 (테넌트 사용자)
```
[테넌트 로그인 페이지]
---------------------------------
| 로고 |
| 이메일/사용자명 [_________] |
| 비밀번호 [_________]       |
| [로그인 버튼]              |
| --------------------------- |
| [SSO 로그인: Google / Azure]|
| [비밀번호 찾기 / 회원가입]  |
---------------------------------
```
회원가입은 테넌트 생성 또는 초대 기반만 가능. 공개 가입 시 신규 테넌트 생성 흐름 포함.

## 플랫폼 운영자(MASTER) 로그인 흐름

  1. 페이지 접근
    - URL: /admin/login (일반 사용자와 분리)
    - 일반 로그인 페이지에서는 운영자 옵션 제거
  2. 인증 옵션
    - Email/Password (강력한 비밀번호 정책 적용)
    - SSO (엔터프라이즈 내부 운영자용)
  3. 보조 인증
    - MFA 필수 (TOTP, WebAuthn)
    - IP 화이트리스트 검증
  4. 세션/토큰 발급
    - JWT + Refresh Token
    - Role claims: PLATFORM_ADMIN, SYSTEM
  5. 리다이렉션
    - 로그인 후 /admin/dashboard로 이동

### 권장 페이지 구성 예 (운영자 전용)
```
[플랫폼 운영자 로그인 페이지]
---------------------------------
| 플랫폼 로고 |
| 이메일 [_________]           |
| 비밀번호 [_________]         |
| [로그인 버튼]                |
| --------------------------- |
| [SSO 로그인: Azure / Okta]   |
| MFA/TOTP 입력 후 진행        |
---------------------------------
```
운영자 계정 생성/관리: 공개 회원가입 불가, 운영 콘솔 또는 승인 기반 프로비저닝 필요.

## 통합 로그인 페이지 전략(선택적)

  - 단일 URL /login에서 사용자 유형 선택 탭 제공 가능
    - Tabs: [테넌트 사용자] [운영자 요청] [SSO]
    - 운영자 요청 탭은 폼 제출 후 운영자 승인 필요 → 실제 MASTER 계정 생성
  - UX 장점: 페이지 통일성 유지, 브랜딩 일관
  - 보안 장점: 공개 가입으로 운영자 계정 생성 불가

### 예시 화면 구성
```
[로그인 페이지 탭]
---------------------------------
| [테넌트 로그인] [운영자 요청] |
---------------------------------
▼ 테넌트 로그인 (기본 탭)
| 이메일/사용자명 [_________] |
| 비밀번호 [_________]       |
| [로그인 버튼]              |
| SSO: Google / Azure        |

▼ 운영자 요청 (승인 필요)
| 업무 이메일 [_________]     |
| 이유 / 직책 [_________]    |
| [요청 제출]                |
---------------------------------
```

## 추가 보안 & UX 고려사항

  - MFA: 운영자 필수, 사용자 선택적 또는 단계적 적용
  - 비밀번호 정책: 최소 12자리 이상 + 특수문자 + 주기적 변경 권장
  - 세션 관리: Refresh Token, IP 제한, 세션 만료 1일~7일
  - 로그인 알림: 운영자 로그인 시 이메일/Slack 알림 가능
  - 계정 잠금: 실패 시 5회~10회 후 잠금 + 관리자 승인 필요
  - 감사 로그: 로그인 시각, IP, MFA 사용 여부 기록

## 결론: 페이지 구성 전략 요약

  1. 테넌트 사용자
    - /login 또는 /tenant/login
    - Email/Password + SSO
    - MFA 선택적
    - 로그인 후 테넌트 홈으로 리다이렉션
  2. 플랫폼 운영자
    - /admin/login (분리)
    - Email/Password + SSO
    - MFA 필수 + IP 화이트리스트
    - 로그인 후 /admin/dashboard
  3. 운영자 생성
    - 공개 가입 불가
    - 운영 콘솔/승인 기반/초대 토큰 프로비저닝
    - 통합 로그인 페이지에서 요청 탭으로 UX 제공 가능
  4. 보안
    - 모든 관리자/운영자 로그인 이벤트 감사 기록
    - MFA, IP 화이트리스트, 세션 정책, 계정 잠금 적용
