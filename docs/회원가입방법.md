# 회원가입방법 트렌드

## 회원가입 트렌드 요약 (2025 기준)

  - 인증 방식 : Email/Password + SSO (OAuth2 / OIDC) 선호, 패스워드 없는 Magic Link 옵션도 증가
  - 테넌트 생성 : 최초 가입자가 테넌트 관리자 역할 자동 부여, 테넌트 기반 초기 설정 포함
  - 운영자 계정 : 공개 회원가입 금지, 별도 승인/초대 기반으로만 생성
  - 보조 인증 : MFA(TOTP, WebAuthn, OTP) 선택적 또는 필수 적용
  - UX : 탭 또는 단계별(wizard) 회원가입, 이메일/SSO 통합, 모바일 최적화
  - 보안 : 운영자 생성 시 반드시 승인, MFA, 이메일/도메인 검증, 감사 로깅


## 테넌트 사용자 회원가입 흐름

### 2-1 단계별 흐름

  1. 페이지 접근
    - URL: /signup
    - 화면: 이메일/사용자명, 비밀번호, 테넌트 정보 입력

  2. 가입 옵션
    - Email/Password 가입 (신규 테넌트 생성 또는 기존 테넌트 가입)
    - SSO 가입 (Azure AD, Google Workspace 등)

  3. 테넌트 지정
    - 신규 가입: “새 테넌트 생성” 체크 → 최초 가입자는 테넌트 관리자 역할 자동 부여
    - 기존 테넌트 초대: 초대 토큰 입력 → 지정된 테넌트에 사용자 추가

  4. MFA/보안 설정
    - 선택적 MFA(TOTP/WebAuthn)
    - 이메일 인증 링크 발송

  5. 가입 완료
    - 계정 생성 + 권한 부여 완료
    - 최초 로그인 시 테넌트 대시보드(/tenant/{tenant_id}/dashboard)로 이동

### 2-2 페이지 구성 예시 (테넌트 사용자)
```
[회원가입 페이지 - 테넌트 사용자]
---------------------------------
| 로고 |
| 이메일 [_________]           |
| 비밀번호 [_________]         |
| 사용자 이름 [_________]      |
| 테넌트 이름 [_________]      |
| [신규 테넌트 생성] 체크박스  |
| [가입 버튼]                  |
| --------------------------- |
| SSO 가입: Google / Azure      |
| 이메일 인증 후 계정 활성화    |
---------------------------------
```

## 플랫폼 운영자(MASTER) 회원가입 흐름

### 3-1 원칙
  - 공개 회원가입 금지: 일반 가입 화면에서는 운영자 계정 생성 불가
  - 승인 기반: 운영자 요청 후 운영팀 승인 → 계정 생성
  - 초대 기반: 기존 MASTER가 초대 토큰 발급 → 신규 운영자가 토큰 수락 → 계정 생성

### 3-2 단계별 흐름
  - 페이지 접근
    - URL: /admin/provision 또는 /signup?admin_request
    - 접근 제한: 운영팀 또는 승인된 사용자만 가능
  - 회원가입 옵션
    - 요청 폼: 업무용 이메일, 직책, 요청 사유, 연락처
    - 제출 후 “승인 대기” 상태
  - 승인
    - 운영자가 승인 → 계정 생성
    - 초기 비밀번호 생성 또는 임시 링크 발송
  - MFA 필수
    - 계정 활성화 전에 TOTP/WebAuthn 설정 필수
  - 가입 완료
    - 계정 활성화 + MASTER 역할 부여
    - /admin/dashboard로 로그인 후 접근

### 3-3 페이지 구성 예시 (운영자 요청)
```
[운영자 요청 페이지]
---------------------------------
| 플랫폼 로고 |
| 업무용 이메일 [_________]    |
| 이름 / 직책 [_________]      |
| 요청 사유 [________________] |
| 연락처 [_________]           |
| [요청 제출 버튼]             |
| --------------------------- |
| 제출 후 운영자의 승인 필요    |
| MFA 등록 필수 안내            |
---------------------------------
```

## 통합 회원가입 페이지 전략(선택적)

  - 단일 /signup에서 탭 또는 단계별 wizard 구성
  - Tabs: [테넌트 사용자] [운영자 요청] [SSO 가입]
  - 운영자 요청 탭은 제출 후 승인 절차 필요
  - 테넌트 사용자 탭은 신규 테넌트 생성 / 초대 수락 선택 가능
  - UX 일관성 유지, 브랜딩 통일

### 예시 화면 구성 (통합)
```
[회원가입 페이지 탭]
---------------------------------
| [테넌트 사용자] [운영자 요청] [SSO] |
---------------------------------
▼ 테넌트 사용자
| 이메일 [_________]
| 비밀번호 [_________]
| 사용자 이름 [_________]
| 테넌트 선택/생성 [_________ / 체크박스]
| [가입 버튼]

▼ 운영자 요청
| 이메일 [_________]
| 이름/직책 [_________]
| 요청 사유 [_________]
| [요청 제출 버튼]
| 승인 후 계정 활성화 안내

▼ SSO 가입
| Google / Azure / Okta 버튼
```

## 보안 및 UX 고려사항

  - 운영자 계정: 공개 가입 금지, 승인/초대 기반만
  - MFA: 운영자 필수, 사용자 선택적
  - 이메일 인증: 가입 완료 전 필수
  - 권한 할당: 신규 테넌트 사용자 → 테넌트 관리자 역할 자동 부여
  - 감사 로깅: 가입 이벤트, 승인 이벤트 모두 기록
  - UI: 탭/단계별 wizard → 모바일 친화적


## 결론

  1. 테넌트 사용자
    - 신규 테넌트 생성/기존 테넌트 초대 기반 가입
    - Email/Password + SSO, 선택적 MFA
    - 가입 완료 후 테넌트 대시보드 이동
  2. 운영자(MASTER)
    - 공개 가입 금지
    - 승인 기반/초대 기반 회원가입
    - MFA 필수, 이메일/도메인 검증
    - 계정 생성 후 운영자 대시보드 접근
  3. 페이지 구성
    - 통합 탭 또는 단계별 wizard
    - 운영자 요청/승인 흐름 UI 명확히 표시
    - 테넌트 사용자 가입은 일반 회원가입과 유사
