-- 통합 IDAM 역할 기본 데이터
-- 표준화된 계층 구조의 역할 시스템

BEGIN;

-- 통합 역할 데이터 삽입
INSERT INTO idam.roles (
    role_code,
    role_name,
    description,
    role_type,
    scope,
    tenant_id,
    is_default,
    priority,
    status
) VALUES

-- ============================================================================
-- 시스템 레벨 역할 (최고 권한)
-- ============================================================================
(
    'SUPER_ADMIN',
    '슈퍼 관리자',
    '모든 시스템 권한을 가진 최고 관리자 (플랫폼 전체 관리)',
    'SYSTEM',
    'GLOBAL',
    NULL,
    false,
    1,
    'ACTIVE'
),

-- ============================================================================
-- 플랫폼 레벨 역할 (전체 플랫폼 관리)
-- ============================================================================
(
    'PLATFORM_ADMIN',
    '플랫폼 관리자',
    '전체 플랫폼 관리 권한을 가진 관리자 (시스템 권한 제외)',
    'PLATFORM',
    'GLOBAL',
    NULL,
    false,
    10,
    'ACTIVE'
),

-- ============================================================================
-- 관리 레벨 역할 (조직/테넌트 관리)
-- ============================================================================
(
    'TENANT_ADMIN',
    '테넌트 관리자',
    '테넌트 조직 관리 권한을 가진 관리자',
    'ADMIN',
    'TENANT',
    NULL,
    false,
    20,
    'ACTIVE'
),

-- ============================================================================
-- 매니저 레벨 역할 (팀/부서 관리)
-- ============================================================================
(
    'USER_MANAGER',
    '사용자 매니저',
    '팀/부서 사용자 관리 권한을 가진 매니저',
    'MANAGER',
    'TENANT',
    NULL,
    false,
    30,
    'ACTIVE'
),

-- ============================================================================
-- 일반 사용자 레벨 역할
-- ============================================================================
(
    'USER',
    '일반 사용자',
    '기본 사용자 권한을 가진 일반 사용자',
    'USER',
    'TENANT',
    NULL,
    true,
    50,
    'ACTIVE'
),

-- ============================================================================
-- 게스트 레벨 역할 (최소 권한)
-- ============================================================================
(
    'GUEST',
    '게스트',
    '임시 또는 제한적 접근 권한을 가진 게스트 사용자',
    'GUEST',
    'GLOBAL',
    NULL,
    false,
    100,
    'ACTIVE'
),

-- ============================================================================
-- 특수 목적 역할
-- ============================================================================
(
    'API_SERVICE',
    'API 서비스',
    'API 전용 서비스 계정 역할',
    'USER',
    'TENANT',
    NULL,
    false,
    40,
    'ACTIVE'
),

(
    'READONLY_ADMIN',
    '읽기 전용 관리자',
    '모든 정보 조회만 가능한 관리자',
    'ADMIN',
    'GLOBAL',
    NULL,
    false,
    25,
    'ACTIVE'
)

ON CONFLICT (role_code) DO NOTHING;

COMMIT;

-- 역할 생성 결과 조회
SELECT
    role_code,
    role_name,
    description,
    role_type,
    scope,
    is_default,
    priority,
    status
FROM idam.roles
ORDER BY priority ASC;
